(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.voie=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/assign"),__esModule:true}},{"core-js/library/fn/object/assign":14}],2:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/create"),__esModule:true}},{"core-js/library/fn/object/create":15}],3:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/define-property"),__esModule:true}},{"core-js/library/fn/object/define-property":16}],4:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/get-prototype-of"),__esModule:true}},{"core-js/library/fn/object/get-prototype-of":17}],5:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/keys"),__esModule:true}},{"core-js/library/fn/object/keys":18}],6:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/set-prototype-of"),__esModule:true}},{"core-js/library/fn/object/set-prototype-of":19}],7:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/promise"),__esModule:true}},{"core-js/library/fn/promise":20}],8:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/symbol"),__esModule:true}},{"core-js/library/fn/symbol":21}],9:[function(require,module,exports){"use strict";exports.default=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};exports.__esModule=true},{}],10:[function(require,module,exports){"use strict";var _defineProperty=require("babel-runtime/core-js/object/define-property");var _defineProperty2=_interopRequireDefault(_defineProperty);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.default=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;(0,_defineProperty2.default)(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.__esModule=true},{"babel-runtime/core-js/object/define-property":3}],11:[function(require,module,exports){"use strict";var _Object$create=require("babel-runtime/core-js/object/create")["default"];var _Object$setPrototypeOf=require("babel-runtime/core-js/object/set-prototype-of")["default"];exports["default"]=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=_Object$create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_Object$setPrototypeOf?_Object$setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};exports.__esModule=true},{"babel-runtime/core-js/object/create":2,"babel-runtime/core-js/object/set-prototype-of":6}],12:[function(require,module,exports){"use strict";var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.default=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":(0,_typeof3.default)(call))==="object"||typeof call==="function")?call:self};exports.__esModule=true},{"babel-runtime/helpers/typeof":13}],13:[function(require,module,exports){"use strict";var _Symbol=require("babel-runtime/core-js/symbol")["default"];exports["default"]=function(obj){return obj&&obj.constructor===_Symbol?"symbol":typeof obj};exports.__esModule=true},{"babel-runtime/core-js/symbol":8}],14:[function(require,module,exports){require("../../modules/es6.object.assign");module.exports=require("../../modules/$.core").Object.assign},{"../../modules/$.core":27,"../../modules/es6.object.assign":78}],15:[function(require,module,exports){var $=require("../../modules/$");module.exports=function create(P,D){return $.create(P,D)}},{"../../modules/$":52}],16:[function(require,module,exports){var $=require("../../modules/$");module.exports=function defineProperty(it,key,desc){return $.setDesc(it,key,desc)}},{"../../modules/$":52}],17:[function(require,module,exports){require("../../modules/es6.object.get-prototype-of");module.exports=require("../../modules/$.core").Object.getPrototypeOf},{"../../modules/$.core":27,"../../modules/es6.object.get-prototype-of":79}],18:[function(require,module,exports){require("../../modules/es6.object.keys");module.exports=require("../../modules/$.core").Object.keys},{"../../modules/$.core":27,"../../modules/es6.object.keys":80}],19:[function(require,module,exports){require("../../modules/es6.object.set-prototype-of");module.exports=require("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":27,"../../modules/es6.object.set-prototype-of":81}],20:[function(require,module,exports){require("../modules/es6.object.to-string");require("../modules/es6.string.iterator");require("../modules/web.dom.iterable");require("../modules/es6.promise");module.exports=require("../modules/$.core").Promise},{"../modules/$.core":27,"../modules/es6.object.to-string":82,"../modules/es6.promise":83,"../modules/es6.string.iterator":84,"../modules/web.dom.iterable":86}],21:[function(require,module,exports){require("../../modules/es6.symbol");require("../../modules/es6.object.to-string");module.exports=require("../../modules/$.core").Symbol},{"../../modules/$.core":27,"../../modules/es6.object.to-string":82,"../../modules/es6.symbol":85}],22:[function(require,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],23:[function(require,module,exports){module.exports=function(){}},{}],24:[function(require,module,exports){var isObject=require("./$.is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./$.is-object":45}],25:[function(require,module,exports){var cof=require("./$.cof"),TAG=require("./$.wks")("toStringTag"),ARG=cof(function(){return arguments}())=="Arguments";module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=(O=Object(it))[TAG])=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},{"./$.cof":26,"./$.wks":75}],26:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],27:[function(require,module,exports){var core=module.exports={version:"1.2.6"};if(typeof __e=="number")__e=core},{}],28:[function(require,module,exports){var aFunction=require("./$.a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./$.a-function":22}],29:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],30:[function(require,module,exports){module.exports=!require("./$.fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./$.fails":34}],31:[function(require,module,exports){var isObject=require("./$.is-object"),document=require("./$.global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./$.global":37,"./$.is-object":45}],32:[function(require,module,exports){var $=require("./$");module.exports=function(it){var keys=$.getKeys(it),getSymbols=$.getSymbols;if(getSymbols){var symbols=getSymbols(it),isEnum=$.isEnum,i=0,key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))keys.push(key)}return keys}},{"./$":52}],33:[function(require,module,exports){var global=require("./$.global"),core=require("./$.core"),ctx=require("./$.ctx"),PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE],key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&key in target;if(own&&key in exports)continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(param){return this instanceof C?new C(param):C(param)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(IS_PROTO)(exports[PROTOTYPE]||(exports[PROTOTYPE]={}))[key]=out}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;module.exports=$export},{"./$.core":27,"./$.ctx":28,"./$.global":37}],34:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],35:[function(require,module,exports){var ctx=require("./$.ctx"),call=require("./$.iter-call"),isArrayIter=require("./$.is-array-iter"),anObject=require("./$.an-object"),toLength=require("./$.to-length"),getIterFn=require("./core.get-iterator-method");module.exports=function(iterable,entries,fn,that){var iterFn=getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0,length,step,iterator;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index])}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){call(iterator,f,step.value,entries)}}},{"./$.an-object":24,"./$.ctx":28,"./$.is-array-iter":43,"./$.iter-call":46,"./$.to-length":72,"./core.get-iterator-method":76}],36:[function(require,module,exports){var toIObject=require("./$.to-iobject"),getNames=require("./$").getNames,toString={}.toString;var windowNames=typeof window=="object"&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return getNames(it)}catch(e){return windowNames.slice()}};module.exports.get=function getOwnPropertyNames(it){if(windowNames&&toString.call(it)=="[object Window]")return getWindowNames(it);return getNames(toIObject(it))}},{"./$":52,"./$.to-iobject":71}],37:[function(require,module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],38:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],39:[function(require,module,exports){var $=require("./$"),createDesc=require("./$.property-desc");module.exports=require("./$.descriptors")?function(object,key,value){return $.setDesc(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},{"./$":52,"./$.descriptors":30,"./$.property-desc":58}],40:[function(require,module,exports){module.exports=require("./$.global").document&&document.documentElement},{"./$.global":37}],41:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],42:[function(require,module,exports){var cof=require("./$.cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./$.cof":26}],43:[function(require,module,exports){var Iterators=require("./$.iterators"),ITERATOR=require("./$.wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./$.iterators":51,"./$.wks":75}],44:[function(require,module,exports){var cof=require("./$.cof");module.exports=Array.isArray||function(arg){return cof(arg)=="Array"}},{"./$.cof":26}],45:[function(require,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],46:[function(require,module,exports){var anObject=require("./$.an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},{"./$.an-object":24}],47:[function(require,module,exports){"use strict";var $=require("./$"),descriptor=require("./$.property-desc"),setToStringTag=require("./$.set-to-string-tag"),IteratorPrototype={};require("./$.hide")(IteratorPrototype,require("./$.wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=$.create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},{"./$":52,"./$.hide":39,"./$.property-desc":58,"./$.set-to-string-tag":64,"./$.wks":75}],48:[function(require,module,exports){"use strict";var LIBRARY=require("./$.library"),$export=require("./$.export"),redefine=require("./$.redefine"),hide=require("./$.hide"),has=require("./$.has"),Iterators=require("./$.iterators"),$iterCreate=require("./$.iter-create"),setToStringTag=require("./$.set-to-string-tag"),getProto=require("./$").getProto,ITERATOR=require("./$.wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),methods,key;if($native){var IteratorPrototype=getProto($default.call(new Base));setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&has(proto,FF_ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);if(DEF_VALUES&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:!DEF_VALUES?$default:getMethod("entries")};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},{"./$":52,"./$.export":33,"./$.has":38,"./$.hide":39,"./$.iter-create":47,"./$.iterators":51,"./$.library":54,"./$.redefine":60,"./$.set-to-string-tag":64,"./$.wks":75}],49:[function(require,module,exports){var ITERATOR=require("./$.wks")("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){safe=true};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./$.wks":75}],50:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],51:[function(require,module,exports){module.exports={}},{}],52:[function(require,module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},{}],53:[function(require,module,exports){var $=require("./$"),toIObject=require("./$.to-iobject");module.exports=function(object,el){var O=toIObject(object),keys=$.getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}},{"./$":52,"./$.to-iobject":71}],54:[function(require,module,exports){module.exports=true},{}],55:[function(require,module,exports){var global=require("./$.global"),macrotask=require("./$.task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode=require("./$.cof")(process)=="process",head,last,notify;var flush=function(){var parent,domain,fn;if(isNode&&(parent=process.domain)){process.domain=null;parent.exit()}while(head){domain=head.domain;fn=head.fn;if(domain)domain.enter();fn();if(domain)domain.exit();head=head.next}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer){var toggle=1,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=-toggle}}else if(Promise&&Promise.resolve){notify=function(){Promise.resolve().then(flush)}}else{notify=function(){macrotask.call(global,flush)}}module.exports=function asap(fn){var task={fn:fn,next:undefined,domain:isNode&&process.domain};if(last)last.next=task;if(!head){head=task;notify()}last=task}},{"./$.cof":26,"./$.global":37,"./$.task":69}],56:[function(require,module,exports){var $=require("./$"),toObject=require("./$.to-object"),IObject=require("./$.iobject");module.exports=require("./$.fails")(function(){var a=Object.assign,A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return a({},A)[S]!=7||Object.keys(a({},B)).join("")!=K})?function assign(target,source){var T=toObject(target),$$=arguments,$$len=$$.length,index=1,getKeys=$.getKeys,getSymbols=$.getSymbols,isEnum=$.isEnum;while($$len>index){var S=IObject($$[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0,key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:Object.assign},{"./$":52,"./$.fails":34,"./$.iobject":42,"./$.to-object":73}],57:[function(require,module,exports){var $export=require("./$.export"),core=require("./$.core"),fails=require("./$.fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{"./$.core":27,"./$.export":33,"./$.fails":34}],58:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},{}],59:[function(require,module,exports){var redefine=require("./$.redefine");module.exports=function(target,src){for(var key in src)redefine(target,key,src[key]);return target}},{"./$.redefine":60}],60:[function(require,module,exports){module.exports=require("./$.hide")},{"./$.hide":39}],61:[function(require,module,exports){module.exports=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}},{}],62:[function(require,module,exports){var getDesc=require("./$").getDesc,isObject=require("./$.is-object"),anObject=require("./$.an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./$.ctx")(Function.call,getDesc(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./$":52,"./$.an-object":24,"./$.ctx":28,"./$.is-object":45}],63:[function(require,module,exports){"use strict";var core=require("./$.core"),$=require("./$"),DESCRIPTORS=require("./$.descriptors"),SPECIES=require("./$.wks")("species");module.exports=function(KEY){var C=core[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])$.setDesc(C,SPECIES,{configurable:true,get:function(){return this}})}},{"./$":52,"./$.core":27,"./$.descriptors":30,"./$.wks":75}],64:[function(require,module,exports){var def=require("./$").setDesc,has=require("./$.has"),TAG=require("./$.wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},{"./$":52,"./$.has":38,"./$.wks":75}],65:[function(require,module,exports){var global=require("./$.global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./$.global":37}],66:[function(require,module,exports){var anObject=require("./$.an-object"),aFunction=require("./$.a-function"),SPECIES=require("./$.wks")("species");module.exports=function(O,D){var C=anObject(O).constructor,S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./$.a-function":22,"./$.an-object":24,"./$.wks":75}],67:[function(require,module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError(name+": use the 'new' operator!");return it}},{}],68:[function(require,module,exports){var toInteger=require("./$.to-integer"),defined=require("./$.defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./$.defined":29,"./$.to-integer":70}],69:[function(require,module,exports){var ctx=require("./$.ctx"),invoke=require("./$.invoke"),html=require("./$.html"),cel=require("./$.dom-create"),global=require("./$.global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listner=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(require("./$.cof")(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listner;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage=="function"&&!global.importScripts){defer=function(id){global.postMessage(id+"","*")};global.addEventListener("message",listner,false)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./$.cof":26,"./$.ctx":28,"./$.dom-create":31,"./$.global":37,"./$.html":40,"./$.invoke":41}],70:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],71:[function(require,module,exports){var IObject=require("./$.iobject"),defined=require("./$.defined");module.exports=function(it){return IObject(defined(it))}},{"./$.defined":29,"./$.iobject":42}],72:[function(require,module,exports){var toInteger=require("./$.to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./$.to-integer":70}],73:[function(require,module,exports){var defined=require("./$.defined");module.exports=function(it){return Object(defined(it))}},{"./$.defined":29}],74:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],75:[function(require,module,exports){var store=require("./$.shared")("wks"),uid=require("./$.uid"),Symbol=require("./$.global").Symbol;module.exports=function(name){return store[name]||(store[name]=Symbol&&Symbol[name]||(Symbol||uid)("Symbol."+name))}},{"./$.global":37,"./$.shared":65,"./$.uid":74}],76:[function(require,module,exports){var classof=require("./$.classof"),ITERATOR=require("./$.wks")("iterator"),Iterators=require("./$.iterators");module.exports=require("./$.core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./$.classof":25,"./$.core":27,"./$.iterators":51,"./$.wks":75}],77:[function(require,module,exports){"use strict";var addToUnscopables=require("./$.add-to-unscopables"),step=require("./$.iter-step"),Iterators=require("./$.iterators"),toIObject=require("./$.to-iobject");module.exports=require("./$.iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},{"./$.add-to-unscopables":23,"./$.iter-define":48,"./$.iter-step":50,"./$.iterators":51,"./$.to-iobject":71}],78:[function(require,module,exports){var $export=require("./$.export");$export($export.S+$export.F,"Object",{assign:require("./$.object-assign")})},{"./$.export":33,"./$.object-assign":56}],79:[function(require,module,exports){var toObject=require("./$.to-object");require("./$.object-sap")("getPrototypeOf",function($getPrototypeOf){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it))}})},{"./$.object-sap":57,"./$.to-object":73}],80:[function(require,module,exports){var toObject=require("./$.to-object");require("./$.object-sap")("keys",function($keys){return function keys(it){return $keys(toObject(it))}})},{"./$.object-sap":57,"./$.to-object":73}],81:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Object",{setPrototypeOf:require("./$.set-proto").set})},{"./$.export":33,"./$.set-proto":62}],82:[function(require,module,exports){},{}],83:[function(require,module,exports){"use strict";var $=require("./$"),LIBRARY=require("./$.library"),global=require("./$.global"),ctx=require("./$.ctx"),classof=require("./$.classof"),$export=require("./$.export"),isObject=require("./$.is-object"),anObject=require("./$.an-object"),aFunction=require("./$.a-function"),strictNew=require("./$.strict-new"),forOf=require("./$.for-of"),setProto=require("./$.set-proto").set,same=require("./$.same-value"),SPECIES=require("./$.wks")("species"),speciesConstructor=require("./$.species-constructor"),asap=require("./$.microtask"),PROMISE="Promise",process=global.process,isNode=classof(process)=="process",P=global[PROMISE],Wrapper;var testResolve=function(sub){var test=new P(function(){});if(sub)test.constructor=Object;return P.resolve(test)===test};var USE_NATIVE=function(){var works=false;function P2(x){var self=new P(x);setProto(self,P2.prototype);return self}try{works=P&&P.resolve&&testResolve();setProto(P2,P);P2.prototype=$.create(P.prototype,{constructor:{value:P2}});if(!(P2.resolve(5).then(function(){})instanceof P2)){works=false}if(works&&require("./$.descriptors")){var thenableThenGotten=false;P.resolve($.setDesc({},"then",{get:function(){thenableThenGotten=true}}));works=thenableThenGotten}}catch(e){works=false}return works}();var sameConstructor=function(a,b){if(LIBRARY&&a===P&&b===Wrapper)return true;return same(a,b)};var getConstructor=function(C){var S=anObject(C)[SPECIES];return S!=undefined?S:C};var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=="function"?then:false};var PromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=aFunction(resolve),this.reject=aFunction(reject)};var perform=function(exec){try{exec()}catch(e){return{error:e}}};var notify=function(record,isReject){if(record.n)return;record.n=true;var chain=record.c;asap(function(){var value=record.v,ok=record.s==1,i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,result,then;try{if(handler){if(!ok)record.h=true;result=handler===true?value:handler(value);if(result===reaction.promise){reject(TypeError("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){reject(e)}};while(chain.length>i)run(chain[i++]);chain.length=0;record.n=false;if(isReject)setTimeout(function(){var promise=record.p,handler,console;if(isUnhandled(promise)){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error("Unhandled promise rejection",value)}}record.a=undefined},1)})};var isUnhandled=function(promise){var record=promise._d,chain=record.a||record.c,i=0,reaction;if(record.h)return false;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false}return true};var $reject=function(value){var record=this;if(record.d)return;record.d=true;record=record.r||record;record.v=value;record.s=2;record.a=record.c.slice();notify(record,true)};var $resolve=function(value){var record=this,then;if(record.d)return;record.d=true;record=record.r||record;try{if(record.p===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){asap(function(){var wrapper={r:record,d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){
$reject.call(wrapper,e)}})}else{record.v=value;record.s=1;notify(record,false)}}catch(e){$reject.call({r:record,d:false},e)}};if(!USE_NATIVE){P=function Promise(executor){aFunction(executor);var record=this._d={p:strictNew(this,P,PROMISE),c:[],a:undefined,s:0,d:false,v:undefined,h:false,n:false};try{executor(ctx($resolve,record,1),ctx($reject,record,1))}catch(err){$reject.call(record,err)}};require("./$.redefine-all")(P.prototype,{then:function then(onFulfilled,onRejected){var reaction=new PromiseCapability(speciesConstructor(this,P)),promise=reaction.promise,record=this._d;reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;record.c.push(reaction);if(record.a)record.a.push(reaction);if(record.s)notify(record,false);return promise},"catch":function(onRejected){return this.then(undefined,onRejected)}})}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:P});require("./$.set-to-string-tag")(P,PROMISE);require("./$.set-species")(PROMISE);Wrapper=require("./$.core")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=new PromiseCapability(this),$$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(!USE_NATIVE||testResolve(true)),PROMISE,{resolve:function resolve(x){if(x instanceof P&&sameConstructor(x.constructor,this))return x;var capability=new PromiseCapability(this),$$resolve=capability.resolve;$$resolve(x);return capability.promise}});$export($export.S+$export.F*!(USE_NATIVE&&require("./$.iter-detect")(function(iter){P.all(iter)["catch"](function(){})})),PROMISE,{all:function all(iterable){var C=getConstructor(this),capability=new PromiseCapability(C),resolve=capability.resolve,reject=capability.reject,values=[];var abrupt=perform(function(){forOf(iterable,false,values.push,values);var remaining=values.length,results=Array(remaining);if(remaining)$.each.call(values,function(promise,index){var alreadyCalled=false;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;results[index]=value;--remaining||resolve(results)},reject)});else resolve(results)});if(abrupt)reject(abrupt.error);return capability.promise},race:function race(iterable){var C=getConstructor(this),capability=new PromiseCapability(C),reject=capability.reject;var abrupt=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(abrupt)reject(abrupt.error);return capability.promise}})},{"./$":52,"./$.a-function":22,"./$.an-object":24,"./$.classof":25,"./$.core":27,"./$.ctx":28,"./$.descriptors":30,"./$.export":33,"./$.for-of":35,"./$.global":37,"./$.is-object":45,"./$.iter-detect":49,"./$.library":54,"./$.microtask":55,"./$.redefine-all":59,"./$.same-value":61,"./$.set-proto":62,"./$.set-species":63,"./$.set-to-string-tag":64,"./$.species-constructor":66,"./$.strict-new":67,"./$.wks":75}],84:[function(require,module,exports){"use strict";var $at=require("./$.string-at")(true);require("./$.iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},{"./$.iter-define":48,"./$.string-at":68}],85:[function(require,module,exports){"use strict";var $=require("./$"),global=require("./$.global"),has=require("./$.has"),DESCRIPTORS=require("./$.descriptors"),$export=require("./$.export"),redefine=require("./$.redefine"),$fails=require("./$.fails"),shared=require("./$.shared"),setToStringTag=require("./$.set-to-string-tag"),uid=require("./$.uid"),wks=require("./$.wks"),keyOf=require("./$.keyof"),$names=require("./$.get-names"),enumKeys=require("./$.enum-keys"),isArray=require("./$.is-array"),anObject=require("./$.an-object"),toIObject=require("./$.to-iobject"),createDesc=require("./$.property-desc"),getDesc=$.getDesc,setDesc=$.setDesc,_create=$.create,getNames=$names.get,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,setter=false,HIDDEN=wks("_hidden"),isEnum=$.isEnum,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),useNative=typeof $Symbol=="function",ObjectProto=Object.prototype;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(setDesc({},"a",{get:function(){return setDesc(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=getDesc(ObjectProto,key);if(protoDesc)delete ObjectProto[key];setDesc(it,key,D);if(protoDesc&&it!==ObjectProto)setDesc(ObjectProto,key,protoDesc)}:setDesc;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);sym._k=tag;DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:true,set:function(value){if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))}});return sym};var isSymbol=function(it){return typeof it=="symbol"};var $defineProperty=function defineProperty(it,key,D){if(D&&has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))setDesc(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return setDesc(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P)),i=0,l=keys.length,key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key);return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){var D=getDesc(it=toIObject(it),key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=getNames(toIObject(it)),result=[],i=0,key;while(names.length>i)if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN)result.push(key);return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var names=getNames(toIObject(it)),result=[],i=0,key;while(names.length>i)if(has(AllSymbols,key=names[i++]))result.push(AllSymbols[key]);return result};var $stringify=function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it],i=1,$$=arguments,replacer,$replacer;while($$.length>i)args.push($$[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)};var buggyJSON=$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"});if(!useNative){$Symbol=function Symbol(){if(isSymbol(this))throw TypeError("Symbol is not a constructor");return wrap(uid(arguments.length>0?arguments[0]:undefined))};redefine($Symbol.prototype,"toString",function toString(){return this._k});isSymbol=function(it){return it instanceof $Symbol};$.create=$create;$.isEnum=$propertyIsEnumerable;$.getDesc=$getOwnPropertyDescriptor;$.setDesc=$defineProperty;$.setDescs=$defineProperties;$.getNames=$names.get=$getOwnPropertyNames;$.getSymbols=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./$.library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}}var symbolStatics={"for":function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){return keyOf(SymbolRegistry,key)},useSetter:function(){setter=true},useSimple:function(){setter=false}};$.each.call(("hasInstance,isConcatSpreadable,iterator,match,replace,search,"+"species,split,toPrimitive,toStringTag,unscopables").split(","),function(it){var sym=wks(it);symbolStatics[it]=useNative?sym:wrap(sym)});setter=true;$export($export.G+$export.W,{Symbol:$Symbol});$export($export.S,"Symbol",symbolStatics);$export($export.S+$export.F*!useNative,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!useNative||buggyJSON),"JSON",{stringify:$stringify});setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},{"./$":52,"./$.an-object":24,"./$.descriptors":30,"./$.enum-keys":32,"./$.export":33,"./$.fails":34,"./$.get-names":36,"./$.global":37,"./$.has":38,"./$.is-array":44,"./$.keyof":53,"./$.library":54,"./$.property-desc":58,"./$.redefine":60,"./$.set-to-string-tag":64,"./$.shared":65,"./$.to-iobject":71,"./$.uid":74,"./$.wks":75}],86:[function(require,module,exports){require("./es6.array.iterator");var Iterators=require("./$.iterators");Iterators.NodeList=Iterators.HTMLCollection=Iterators.Array},{"./$.iterators":51,"./es6.array.iterator":77}],87:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],88:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":89}],89:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:90}],90:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],91:[function(require,module,exports){"use strict";var prefix=typeof Object.create!=="function"?"~":false;function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function EventEmitter(){}EventEmitter.prototype._events=undefined;EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn}return ee};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if("function"===typeof listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn){if(listeners.fn){if(listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context){events.push(listeners)}}else{for(var i=0,length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}}}if(events.length){this._events[evt]=events.length===1?events[0]:events}else{delete this._events[evt]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){if(!this._events)return this;if(event)delete this._events[prefix?prefix+event:event];else this._events=prefix?{}:Object.create(null);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;if("undefined"!==typeof module){module.exports=EventEmitter}},{}],92:[function(require,module,exports){"use strict";exports.__esModule=true;var PUSH="PUSH";exports.PUSH=PUSH;var REPLACE="REPLACE";exports.REPLACE=REPLACE;var POP="POP";exports.POP=POP;exports["default"]={PUSH:PUSH,REPLACE:REPLACE,POP:POP}},{}],93:[function(require,module,exports){"use strict";exports.__esModule=true;exports.loopAsync=loopAsync;function loopAsync(turns,work,callback){var currentTurn=0;var isDone=false;function done(){isDone=true;callback.apply(this,arguments)}function next(){if(isDone)return;if(currentTurn<turns){work.call(this,currentTurn++,next,done)}else{done.apply(this,arguments)}}next()}},{}],94:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;exports.saveState=saveState;exports.readState=readState;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);var KeyPrefix="@@History/";var QuotaExceededError="QuotaExceededError";var SecurityError="SecurityError";function createKey(key){return KeyPrefix+key}function saveState(key,state){try{window.sessionStorage.setItem(createKey(key),JSON.stringify(state))}catch(error){if(error.name===SecurityError){process.env.NODE_ENV!=="production"?_warning2["default"](false,"[history] Unable to save state; sessionStorage is not available due to security settings"):undefined;return}if(error.name===QuotaExceededError&&window.sessionStorage.length===0){process.env.NODE_ENV!=="production"?_warning2["default"](false,"[history] Unable to save state; sessionStorage is not available in Safari private mode"):undefined;return}throw error}}function readState(key){var json=undefined;try{json=window.sessionStorage.getItem(createKey(key))}catch(error){if(error.name===SecurityError){process.env.NODE_ENV!=="production"?_warning2["default"](false,"[history] Unable to read state; sessionStorage is not available due to security settings"):undefined;return null}}if(json){try{return JSON.parse(json)}catch(error){}}return null}}).call(this,require("_process"))},{_process:87,warning:117}],95:[function(require,module,exports){"use strict";exports.__esModule=true;exports.addEventListener=addEventListener;exports.removeEventListener=removeEventListener;exports.getHashPath=getHashPath;exports.replaceHashPath=replaceHashPath;exports.getWindowPath=getWindowPath;exports.go=go;exports.getUserConfirmation=getUserConfirmation;exports.supportsHistory=supportsHistory;exports.supportsGoWithoutReloadUsingHash=supportsGoWithoutReloadUsingHash;function addEventListener(node,event,listener){if(node.addEventListener){node.addEventListener(event,listener,false)}else{node.attachEvent("on"+event,listener)}}function removeEventListener(node,event,listener){if(node.removeEventListener){node.removeEventListener(event,listener,false)}else{node.detachEvent("on"+event,listener)}}function getHashPath(){return window.location.href.split("#")[1]||""}function replaceHashPath(path){window.location.replace(window.location.pathname+window.location.search+"#"+path)}function getWindowPath(){return window.location.pathname+window.location.search+window.location.hash}function go(n){if(n)window.history.go(n)}function getUserConfirmation(message,callback){callback(window.confirm(message))}function supportsHistory(){var ua=navigator.userAgent;if((ua.indexOf("Android 2.")!==-1||ua.indexOf("Android 4.0")!==-1)&&ua.indexOf("Mobile Safari")!==-1&&ua.indexOf("Chrome")===-1&&ua.indexOf("Windows Phone")===-1){return false}if(ua.indexOf("CriOS")!==-1){return false}return window.history&&"pushState"in window.history}function supportsGoWithoutReloadUsingHash(){var ua=navigator.userAgent;return ua.indexOf("Firefox")===-1}},{}],96:[function(require,module,exports){"use strict";exports.__esModule=true;var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);exports.canUseDOM=canUseDOM},{}],97:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _invariant=require("invariant");var _invariant2=_interopRequireDefault(_invariant);var _Actions=require("./Actions");var _ExecutionEnvironment=require("./ExecutionEnvironment");var _DOMUtils=require("./DOMUtils");var _DOMStateStorage=require("./DOMStateStorage");var _createDOMHistory=require("./createDOMHistory");var _createDOMHistory2=_interopRequireDefault(_createDOMHistory);var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);function createBrowserHistory(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];!_ExecutionEnvironment.canUseDOM?process.env.NODE_ENV!=="production"?_invariant2["default"](false,"Browser history needs a DOM"):_invariant2["default"](false):undefined;var forceRefresh=options.forceRefresh;var isSupported=_DOMUtils.supportsHistory();var useRefresh=!isSupported||forceRefresh;function getCurrentLocation(historyState){historyState=historyState||window.history.state||{};var path=_DOMUtils.getWindowPath();var _historyState=historyState;var key=_historyState.key;var state=undefined;if(key){state=_DOMStateStorage.readState(key)}else{state=null;key=history.createKey();if(isSupported)window.history.replaceState(_extends({},historyState,{key:key}),null,path)}var location=_parsePath2["default"](path);return history.createLocation(_extends({},location,{state:state}),undefined,key)}function startPopStateListener(_ref){var transitionTo=_ref.transitionTo;function popStateListener(event){if(event.state===undefined)return;transitionTo(getCurrentLocation(event.state))}_DOMUtils.addEventListener(window,"popstate",popStateListener);return function(){_DOMUtils.removeEventListener(window,"popstate",popStateListener)}}function finishTransition(location){var basename=location.basename;var pathname=location.pathname;var search=location.search;var hash=location.hash;var state=location.state;var action=location.action;var key=location.key;if(action===_Actions.POP)return;_DOMStateStorage.saveState(key,state);var path=(basename||"")+pathname+search+hash;var historyState={key:key};if(action===_Actions.PUSH){if(useRefresh){window.location.href=path;return false}else{window.history.pushState(historyState,null,path)}}else{if(useRefresh){window.location.replace(path);return false}else{window.history.replaceState(historyState,null,path)}}}var history=_createDOMHistory2["default"](_extends({},options,{getCurrentLocation:getCurrentLocation,finishTransition:finishTransition,saveState:_DOMStateStorage.saveState}));var listenerCount=0,stopPopStateListener=undefined;function listenBefore(listener){if(++listenerCount===1)stopPopStateListener=startPopStateListener(history);var unlisten=history.listenBefore(listener);return function(){unlisten();if(--listenerCount===0)stopPopStateListener()}}function listen(listener){if(++listenerCount===1)stopPopStateListener=startPopStateListener(history);var unlisten=history.listen(listener);return function(){unlisten();if(--listenerCount===0)stopPopStateListener()}}function registerTransitionHook(hook){if(++listenerCount===1)stopPopStateListener=startPopStateListener(history);history.registerTransitionHook(hook)}function unregisterTransitionHook(hook){history.unregisterTransitionHook(hook);if(--listenerCount===0)stopPopStateListener()}return _extends({},history,{listenBefore:listenBefore,listen:listen,registerTransitionHook:registerTransitionHook,unregisterTransitionHook:unregisterTransitionHook})}exports["default"]=createBrowserHistory;module.exports=exports["default"]}).call(this,require("_process"))},{"./Actions":92,"./DOMStateStorage":94,"./DOMUtils":95,"./ExecutionEnvironment":96,"./createDOMHistory":98,"./parsePath":108,_process:87,invariant:116}],98:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _invariant=require("invariant");var _invariant2=_interopRequireDefault(_invariant);var _ExecutionEnvironment=require("./ExecutionEnvironment");var _DOMUtils=require("./DOMUtils");var _createHistory=require("./createHistory");var _createHistory2=_interopRequireDefault(_createHistory);function createDOMHistory(options){var history=_createHistory2["default"](_extends({getUserConfirmation:_DOMUtils.getUserConfirmation},options,{go:_DOMUtils.go}));function listen(listener){!_ExecutionEnvironment.canUseDOM?process.env.NODE_ENV!=="production"?_invariant2["default"](false,"DOM history needs a DOM"):_invariant2["default"](false):undefined;return history.listen(listener)}return _extends({},history,{listen:listen})}exports["default"]=createDOMHistory;module.exports=exports["default"]}).call(this,require("_process"))},{"./DOMUtils":95,"./ExecutionEnvironment":96,"./createHistory":100,_process:87,invariant:116}],99:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);var _invariant=require("invariant");var _invariant2=_interopRequireDefault(_invariant);var _Actions=require("./Actions");var _ExecutionEnvironment=require("./ExecutionEnvironment");var _DOMUtils=require("./DOMUtils");var _DOMStateStorage=require("./DOMStateStorage");var _createDOMHistory=require("./createDOMHistory");var _createDOMHistory2=_interopRequireDefault(_createDOMHistory);var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);function isAbsolutePath(path){return typeof path==="string"&&path.charAt(0)==="/"}function ensureSlash(){var path=_DOMUtils.getHashPath();if(isAbsolutePath(path))return true;_DOMUtils.replaceHashPath("/"+path);return false}function addQueryStringValueToPath(path,key,value){return path+(path.indexOf("?")===-1?"?":"&")+(key+"="+value)}function stripQueryStringValueFromPath(path,key){return path.replace(new RegExp("[?&]?"+key+"=[a-zA-Z0-9]+"),"")}function getQueryStringValueFromPath(path,key){var match=path.match(new RegExp("\\?.*?\\b"+key+"=(.+?)\\b"));return match&&match[1]}var DefaultQueryKey="_k";function createHashHistory(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];!_ExecutionEnvironment.canUseDOM?process.env.NODE_ENV!=="production"?_invariant2["default"](false,"Hash history needs a DOM"):_invariant2["default"](false):undefined;var queryKey=options.queryKey;if(queryKey===undefined||!!queryKey)queryKey=typeof queryKey==="string"?queryKey:DefaultQueryKey;function getCurrentLocation(){var path=_DOMUtils.getHashPath();var key=undefined,state=undefined;if(queryKey){key=getQueryStringValueFromPath(path,queryKey);path=stripQueryStringValueFromPath(path,queryKey);if(key){state=_DOMStateStorage.readState(key)}else{state=null;key=history.createKey();_DOMUtils.replaceHashPath(addQueryStringValueToPath(path,queryKey,key))}}else{key=state=null}var location=_parsePath2["default"](path);return history.createLocation(_extends({},location,{state:state}),undefined,key)}function startHashChangeListener(_ref){var transitionTo=_ref.transitionTo;function hashChangeListener(){if(!ensureSlash())return;transitionTo(getCurrentLocation())}ensureSlash();_DOMUtils.addEventListener(window,"hashchange",hashChangeListener);return function(){_DOMUtils.removeEventListener(window,"hashchange",hashChangeListener)}}function finishTransition(location){var basename=location.basename;var pathname=location.pathname;var search=location.search;var state=location.state;var action=location.action;var key=location.key;if(action===_Actions.POP)return;var path=(basename||"")+pathname+search;if(queryKey){path=addQueryStringValueToPath(path,queryKey,key);_DOMStateStorage.saveState(key,state)}else{location.key=location.state=null}var currentHash=_DOMUtils.getHashPath();
if(action===_Actions.PUSH){if(currentHash!==path){window.location.hash=path}else{process.env.NODE_ENV!=="production"?_warning2["default"](false,"You cannot PUSH the same path using hash history"):undefined}}else if(currentHash!==path){_DOMUtils.replaceHashPath(path)}}var history=_createDOMHistory2["default"](_extends({},options,{getCurrentLocation:getCurrentLocation,finishTransition:finishTransition,saveState:_DOMStateStorage.saveState}));var listenerCount=0,stopHashChangeListener=undefined;function listenBefore(listener){if(++listenerCount===1)stopHashChangeListener=startHashChangeListener(history);var unlisten=history.listenBefore(listener);return function(){unlisten();if(--listenerCount===0)stopHashChangeListener()}}function listen(listener){if(++listenerCount===1)stopHashChangeListener=startHashChangeListener(history);var unlisten=history.listen(listener);return function(){unlisten();if(--listenerCount===0)stopHashChangeListener()}}function push(location){process.env.NODE_ENV!=="production"?_warning2["default"](queryKey||location.state==null,"You cannot use state without a queryKey it will be dropped"):undefined;history.push(location)}function replace(location){process.env.NODE_ENV!=="production"?_warning2["default"](queryKey||location.state==null,"You cannot use state without a queryKey it will be dropped"):undefined;history.replace(location)}var goIsSupportedWithoutReload=_DOMUtils.supportsGoWithoutReloadUsingHash();function go(n){process.env.NODE_ENV!=="production"?_warning2["default"](goIsSupportedWithoutReload,"Hash history go(n) causes a full page reload in this browser"):undefined;history.go(n)}function createHref(path){return"#"+history.createHref(path)}function registerTransitionHook(hook){if(++listenerCount===1)stopHashChangeListener=startHashChangeListener(history);history.registerTransitionHook(hook)}function unregisterTransitionHook(hook){history.unregisterTransitionHook(hook);if(--listenerCount===0)stopHashChangeListener()}function pushState(state,path){process.env.NODE_ENV!=="production"?_warning2["default"](queryKey||state==null,"You cannot use state without a queryKey it will be dropped"):undefined;history.pushState(state,path)}function replaceState(state,path){process.env.NODE_ENV!=="production"?_warning2["default"](queryKey||state==null,"You cannot use state without a queryKey it will be dropped"):undefined;history.replaceState(state,path)}return _extends({},history,{listenBefore:listenBefore,listen:listen,push:push,replace:replace,go:go,createHref:createHref,registerTransitionHook:registerTransitionHook,unregisterTransitionHook:unregisterTransitionHook,pushState:pushState,replaceState:replaceState})}exports["default"]=createHashHistory;module.exports=exports["default"]}).call(this,require("_process"))},{"./Actions":92,"./DOMStateStorage":94,"./DOMUtils":95,"./ExecutionEnvironment":96,"./createDOMHistory":98,"./parsePath":108,_process:87,invariant:116,warning:117}],100:[function(require,module,exports){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _deepEqual=require("deep-equal");var _deepEqual2=_interopRequireDefault(_deepEqual);var _AsyncUtils=require("./AsyncUtils");var _Actions=require("./Actions");var _createLocation2=require("./createLocation");var _createLocation3=_interopRequireDefault(_createLocation2);var _runTransitionHook=require("./runTransitionHook");var _runTransitionHook2=_interopRequireDefault(_runTransitionHook);var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);function createRandomKey(length){return Math.random().toString(36).substr(2,length)}function locationsAreEqual(a,b){return a.pathname===b.pathname&&a.search===b.search&&a.key===b.key&&_deepEqual2["default"](a.state,b.state)}var DefaultKeyLength=6;function createHistory(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var getCurrentLocation=options.getCurrentLocation;var finishTransition=options.finishTransition;var saveState=options.saveState;var go=options.go;var keyLength=options.keyLength;var getUserConfirmation=options.getUserConfirmation;if(typeof keyLength!=="number")keyLength=DefaultKeyLength;var transitionHooks=[];function listenBefore(hook){transitionHooks.push(hook);return function(){transitionHooks=transitionHooks.filter(function(item){return item!==hook})}}var allKeys=[];var changeListeners=[];var location=undefined;function getCurrent(){if(pendingLocation&&pendingLocation.action===_Actions.POP){return allKeys.indexOf(pendingLocation.key)}else if(location){return allKeys.indexOf(location.key)}else{return-1}}function updateLocation(newLocation){var current=getCurrent();location=newLocation;if(location.action===_Actions.PUSH){allKeys=[].concat(allKeys.slice(0,current+1),[location.key])}else if(location.action===_Actions.REPLACE){allKeys[current]=location.key}changeListeners.forEach(function(listener){listener(location)})}function listen(listener){changeListeners.push(listener);if(location){listener(location)}else{var _location=getCurrentLocation();allKeys=[_location.key];updateLocation(_location)}return function(){changeListeners=changeListeners.filter(function(item){return item!==listener})}}function confirmTransitionTo(location,callback){_AsyncUtils.loopAsync(transitionHooks.length,function(index,next,done){_runTransitionHook2["default"](transitionHooks[index],location,function(result){if(result!=null){done(result)}else{next()}})},function(message){if(getUserConfirmation&&typeof message==="string"){getUserConfirmation(message,function(ok){callback(ok!==false)})}else{callback(message!==false)}})}var pendingLocation=undefined;function transitionTo(nextLocation){if(location&&locationsAreEqual(location,nextLocation))return;pendingLocation=nextLocation;confirmTransitionTo(nextLocation,function(ok){if(pendingLocation!==nextLocation)return;if(ok){if(nextLocation.action===_Actions.PUSH){var prevPath=createPath(location);var nextPath=createPath(nextLocation);if(nextPath===prevPath)nextLocation.action=_Actions.REPLACE}if(finishTransition(nextLocation)!==false)updateLocation(nextLocation)}else if(location&&nextLocation.action===_Actions.POP){var prevIndex=allKeys.indexOf(location.key);var nextIndex=allKeys.indexOf(nextLocation.key);if(prevIndex!==-1&&nextIndex!==-1)go(prevIndex-nextIndex)}})}function push(location){transitionTo(createLocation(location,_Actions.PUSH,createKey()))}function replace(location){transitionTo(createLocation(location,_Actions.REPLACE,createKey()))}function goBack(){go(-1)}function goForward(){go(1)}function createKey(){return createRandomKey(keyLength)}function createPath(location){if(location==null||typeof location==="string")return location;var pathname=location.pathname;var search=location.search;var hash=location.hash;var result=pathname;if(search)result+=search;if(hash)result+=hash;return result}function createHref(location){return createPath(location)}function createLocation(location,action){var key=arguments.length<=2||arguments[2]===undefined?createKey():arguments[2];if(typeof action==="object"){if(typeof location==="string")location=_parsePath2["default"](location);location=_extends({},location,{state:action});action=key;key=arguments[3]||createKey()}return _createLocation3["default"](location,action,key)}function setState(state){if(location){updateLocationState(location,state);updateLocation(location)}else{updateLocationState(getCurrentLocation(),state)}}function updateLocationState(location,state){location.state=_extends({},location.state,state);saveState(location.key,location.state)}function registerTransitionHook(hook){if(transitionHooks.indexOf(hook)===-1)transitionHooks.push(hook)}function unregisterTransitionHook(hook){transitionHooks=transitionHooks.filter(function(item){return item!==hook})}function pushState(state,path){if(typeof path==="string")path=_parsePath2["default"](path);push(_extends({state:state},path))}function replaceState(state,path){if(typeof path==="string")path=_parsePath2["default"](path);replace(_extends({state:state},path))}return{listenBefore:listenBefore,listen:listen,transitionTo:transitionTo,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,createKey:createKey,createPath:createPath,createHref:createHref,createLocation:createLocation,setState:_deprecate2["default"](setState,"setState is deprecated; use location.key to save state instead"),registerTransitionHook:_deprecate2["default"](registerTransitionHook,"registerTransitionHook is deprecated; use listenBefore instead"),unregisterTransitionHook:_deprecate2["default"](unregisterTransitionHook,"unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead"),pushState:_deprecate2["default"](pushState,"pushState is deprecated; use push instead"),replaceState:_deprecate2["default"](replaceState,"replaceState is deprecated; use replace instead")}}exports["default"]=createHistory;module.exports=exports["default"]},{"./Actions":92,"./AsyncUtils":93,"./createLocation":101,"./deprecate":103,"./parsePath":108,"./runTransitionHook":109,"deep-equal":113}],101:[function(require,module,exports){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _Actions=require("./Actions");var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);function createLocation(){var location=arguments.length<=0||arguments[0]===undefined?"/":arguments[0];var action=arguments.length<=1||arguments[1]===undefined?_Actions.POP:arguments[1];var key=arguments.length<=2||arguments[2]===undefined?null:arguments[2];var _fourthArg=arguments.length<=3||arguments[3]===undefined?null:arguments[3];if(typeof location==="string")location=_parsePath2["default"](location);if(typeof action==="object"){location=_extends({},location,{state:action});action=key||_Actions.POP;key=_fourthArg}var pathname=location.pathname||"/";var search=location.search||"";var hash=location.hash||"";var state=location.state||null;return{pathname:pathname,search:search,hash:hash,state:state,action:action,key:key}}exports["default"]=createLocation;module.exports=exports["default"]},{"./Actions":92,"./parsePath":108}],102:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);var _invariant=require("invariant");var _invariant2=_interopRequireDefault(_invariant);var _Actions=require("./Actions");var _createHistory=require("./createHistory");var _createHistory2=_interopRequireDefault(_createHistory);var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);function createStateStorage(entries){return entries.filter(function(entry){return entry.state}).reduce(function(memo,entry){memo[entry.key]=entry.state;return memo},{})}function createMemoryHistory(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if(Array.isArray(options)){options={entries:options}}else if(typeof options==="string"){options={entries:[options]}}var history=_createHistory2["default"](_extends({},options,{getCurrentLocation:getCurrentLocation,finishTransition:finishTransition,saveState:saveState,go:go}));var _options=options;var entries=_options.entries;var current=_options.current;if(typeof entries==="string"){entries=[entries]}else if(!Array.isArray(entries)){entries=["/"]}entries=entries.map(function(entry){var key=history.createKey();if(typeof entry==="string")return{pathname:entry,key:key};if(typeof entry==="object"&&entry)return _extends({},entry,{key:key});!false?process.env.NODE_ENV!=="production"?_invariant2["default"](false,"Unable to create history entry from %s",entry):_invariant2["default"](false):undefined});if(current==null){current=entries.length-1}else{!(current>=0&&current<entries.length)?process.env.NODE_ENV!=="production"?_invariant2["default"](false,"Current index must be >= 0 and < %s, was %s",entries.length,current):_invariant2["default"](false):undefined}var storage=createStateStorage(entries);function saveState(key,state){storage[key]=state}function readState(key){return storage[key]}function getCurrentLocation(){var entry=entries[current];var key=entry.key;var basename=entry.basename;var pathname=entry.pathname;var search=entry.search;var path=(basename||"")+pathname+(search||"");var state=undefined;if(key){state=readState(key)}else{state=null;key=history.createKey();entry.key=key}var location=_parsePath2["default"](path);return history.createLocation(_extends({},location,{state:state}),undefined,key)}function canGo(n){var index=current+n;return index>=0&&index<entries.length}function go(n){if(n){if(!canGo(n)){process.env.NODE_ENV!=="production"?_warning2["default"](false,"Cannot go(%s) there is not enough history",n):undefined;return}current+=n;var currentLocation=getCurrentLocation();history.transitionTo(_extends({},currentLocation,{action:_Actions.POP}))}}function finishTransition(location){switch(location.action){case _Actions.PUSH:current+=1;if(current<entries.length)entries.splice(current);entries.push(location);saveState(location.key,location.state);break;case _Actions.REPLACE:entries[current]=location;saveState(location.key,location.state);break}}return history}exports["default"]=createMemoryHistory;module.exports=exports["default"]}).call(this,require("_process"))},{"./Actions":92,"./createHistory":100,"./parsePath":108,_process:87,invariant:116,warning:117}],103:[function(require,module,exports){"use strict";exports.__esModule=true;function deprecate(fn){return fn}exports["default"]=deprecate;module.exports=exports["default"]},{}],104:[function(require,module,exports){"use strict";exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);var _useBeforeUnload=require("./useBeforeUnload");var _useBeforeUnload2=_interopRequireDefault(_useBeforeUnload);exports["default"]=_deprecate2["default"](_useBeforeUnload2["default"],"enableBeforeUnload is deprecated, use useBeforeUnload instead");module.exports=exports["default"]},{"./deprecate":103,"./useBeforeUnload":111}],105:[function(require,module,exports){"use strict";exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);var _useQueries=require("./useQueries");var _useQueries2=_interopRequireDefault(_useQueries);exports["default"]=_deprecate2["default"](_useQueries2["default"],"enableQueries is deprecated, use useQueries instead");module.exports=exports["default"]},{"./deprecate":103,"./useQueries":112}],106:[function(require,module,exports){"use strict";exports.__esModule=true;function extractPath(string){var match=string.match(/^https?:\/\/[^\/]*/);if(match==null)return string;return string.substring(match[0].length)}exports["default"]=extractPath;module.exports=exports["default"]},{}],107:[function(require,module,exports){"use strict";exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);var _createLocation2=require("./createLocation");var _createLocation3=_interopRequireDefault(_createLocation2);var _createBrowserHistory=require("./createBrowserHistory");var _createBrowserHistory2=_interopRequireDefault(_createBrowserHistory);exports.createHistory=_createBrowserHistory2["default"];var _createHashHistory2=require("./createHashHistory");var _createHashHistory3=_interopRequireDefault(_createHashHistory2);exports.createHashHistory=_createHashHistory3["default"];var _createMemoryHistory2=require("./createMemoryHistory");var _createMemoryHistory3=_interopRequireDefault(_createMemoryHistory2);exports.createMemoryHistory=_createMemoryHistory3["default"];var _useBasename2=require("./useBasename");var _useBasename3=_interopRequireDefault(_useBasename2);exports.useBasename=_useBasename3["default"];var _useBeforeUnload2=require("./useBeforeUnload");var _useBeforeUnload3=_interopRequireDefault(_useBeforeUnload2);exports.useBeforeUnload=_useBeforeUnload3["default"];var _useQueries2=require("./useQueries");var _useQueries3=_interopRequireDefault(_useQueries2);exports.useQueries=_useQueries3["default"];var _Actions2=require("./Actions");var _Actions3=_interopRequireDefault(_Actions2);exports.Actions=_Actions3["default"];var _enableBeforeUnload2=require("./enableBeforeUnload");var _enableBeforeUnload3=_interopRequireDefault(_enableBeforeUnload2);exports.enableBeforeUnload=_enableBeforeUnload3["default"];var _enableQueries2=require("./enableQueries");var _enableQueries3=_interopRequireDefault(_enableQueries2);exports.enableQueries=_enableQueries3["default"];var createLocation=_deprecate2["default"](_createLocation3["default"],"Using createLocation without a history instance is deprecated; please use history.createLocation instead");exports.createLocation=createLocation},{"./Actions":92,"./createBrowserHistory":97,"./createHashHistory":99,"./createLocation":101,"./createMemoryHistory":102,"./deprecate":103,"./enableBeforeUnload":104,"./enableQueries":105,"./useBasename":110,"./useBeforeUnload":111,"./useQueries":112}],108:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);var _extractPath=require("./extractPath");var _extractPath2=_interopRequireDefault(_extractPath);function parsePath(path){var pathname=_extractPath2["default"](path);var search="";var hash="";process.env.NODE_ENV!=="production"?_warning2["default"](path===pathname,'A path must be pathname + search + hash only, not a fully qualified URL like "%s"',path):undefined;var hashIndex=pathname.indexOf("#");if(hashIndex!==-1){hash=pathname.substring(hashIndex);pathname=pathname.substring(0,hashIndex)}var searchIndex=pathname.indexOf("?");if(searchIndex!==-1){search=pathname.substring(searchIndex);pathname=pathname.substring(0,searchIndex)}if(pathname==="")pathname="/";return{pathname:pathname,search:search,hash:hash}}exports["default"]=parsePath;module.exports=exports["default"]}).call(this,require("_process"))},{"./extractPath":106,_process:87,warning:117}],109:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);function runTransitionHook(hook,location,callback){var result=hook(location,callback);if(hook.length<2){callback(result)}else{process.env.NODE_ENV!=="production"?_warning2["default"](result===undefined,'You should not "return" in a transition hook with a callback argument; call the callback instead'):undefined}}exports["default"]=runTransitionHook;module.exports=exports["default"]}).call(this,require("_process"))},{_process:87,warning:117}],110:[function(require,module,exports){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var _ExecutionEnvironment=require("./ExecutionEnvironment");var _runTransitionHook=require("./runTransitionHook");var _runTransitionHook2=_interopRequireDefault(_runTransitionHook);var _extractPath=require("./extractPath");var _extractPath2=_interopRequireDefault(_extractPath);var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);function useBasename(createHistory){return function(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var basename=options.basename;var historyOptions=_objectWithoutProperties(options,["basename"]);var history=createHistory(historyOptions);if(basename==null&&_ExecutionEnvironment.canUseDOM){var base=document.getElementsByTagName("base")[0];if(base)basename=_extractPath2["default"](base.href)}function addBasename(location){if(basename&&location.basename==null){if(location.pathname.indexOf(basename)===0){location.pathname=location.pathname.substring(basename.length);location.basename=basename;if(location.pathname==="")location.pathname="/"}else{location.basename=""}}return location}function prependBasename(location){if(!basename)return location;if(typeof location==="string")location=_parsePath2["default"](location);var pname=location.pathname;var normalizedBasename=basename.slice(-1)==="/"?basename:basename+"/";var normalizedPathname=pname.charAt(0)==="/"?pname.slice(1):pname;var pathname=normalizedBasename+normalizedPathname;return _extends({},location,{pathname:pathname})}function listenBefore(hook){return history.listenBefore(function(location,callback){_runTransitionHook2["default"](hook,addBasename(location),callback)})}function listen(listener){return history.listen(function(location){listener(addBasename(location))})}function push(location){history.push(prependBasename(location))}function replace(location){history.replace(prependBasename(location))}function createPath(location){return history.createPath(prependBasename(location))}function createHref(location){return history.createHref(prependBasename(location))}function createLocation(){return addBasename(history.createLocation.apply(history,arguments))}function pushState(state,path){if(typeof path==="string")path=_parsePath2["default"](path);push(_extends({state:state},path))}function replaceState(state,path){if(typeof path==="string")path=_parsePath2["default"](path);replace(_extends({state:state},path))}return _extends({},history,{listenBefore:listenBefore,listen:listen,push:push,replace:replace,createPath:createPath,createHref:createHref,createLocation:createLocation,pushState:_deprecate2["default"](pushState,"pushState is deprecated; use push instead"),replaceState:_deprecate2["default"](replaceState,"replaceState is deprecated; use replace instead")})}}exports["default"]=useBasename;module.exports=exports["default"]},{"./ExecutionEnvironment":96,"./deprecate":103,"./extractPath":106,"./parsePath":108,"./runTransitionHook":109}],111:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);var _ExecutionEnvironment=require("./ExecutionEnvironment");var _DOMUtils=require("./DOMUtils");var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);function startBeforeUnloadListener(getBeforeUnloadPromptMessage){function listener(event){var message=getBeforeUnloadPromptMessage();if(typeof message==="string"){(event||window.event).returnValue=message;return message}}_DOMUtils.addEventListener(window,"beforeunload",listener);return function(){_DOMUtils.removeEventListener(window,"beforeunload",listener)}}function useBeforeUnload(createHistory){return function(options){var history=createHistory(options);var stopBeforeUnloadListener=undefined;var beforeUnloadHooks=[];function getBeforeUnloadPromptMessage(){var message=undefined;for(var i=0,len=beforeUnloadHooks.length;message==null&&i<len;++i){message=beforeUnloadHooks[i].call()}return message}function listenBeforeUnload(hook){beforeUnloadHooks.push(hook);if(beforeUnloadHooks.length===1){if(_ExecutionEnvironment.canUseDOM){stopBeforeUnloadListener=startBeforeUnloadListener(getBeforeUnloadPromptMessage)}else{process.env.NODE_ENV!=="production"?_warning2["default"](false,"listenBeforeUnload only works in DOM environments"):undefined}}return function(){beforeUnloadHooks=beforeUnloadHooks.filter(function(item){return item!==hook});if(beforeUnloadHooks.length===0&&stopBeforeUnloadListener){stopBeforeUnloadListener();stopBeforeUnloadListener=null}}}function registerBeforeUnloadHook(hook){if(_ExecutionEnvironment.canUseDOM&&beforeUnloadHooks.indexOf(hook)===-1){beforeUnloadHooks.push(hook);if(beforeUnloadHooks.length===1)stopBeforeUnloadListener=startBeforeUnloadListener(getBeforeUnloadPromptMessage)}}function unregisterBeforeUnloadHook(hook){if(beforeUnloadHooks.length>0){beforeUnloadHooks=beforeUnloadHooks.filter(function(item){return item!==hook});if(beforeUnloadHooks.length===0)stopBeforeUnloadListener()}}return _extends({},history,{listenBeforeUnload:listenBeforeUnload,registerBeforeUnloadHook:_deprecate2["default"](registerBeforeUnloadHook,"registerBeforeUnloadHook is deprecated; use listenBeforeUnload instead"),unregisterBeforeUnloadHook:_deprecate2["default"](unregisterBeforeUnloadHook,"unregisterBeforeUnloadHook is deprecated; use the callback returned from listenBeforeUnload instead")})}}exports["default"]=useBeforeUnload;module.exports=exports["default"]}).call(this,require("_process"))},{"./DOMUtils":95,"./ExecutionEnvironment":96,"./deprecate":103,_process:87,warning:117}],112:[function(require,module,exports){(function(process){"use strict";exports.__esModule=true;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var _warning=require("warning");var _warning2=_interopRequireDefault(_warning);var _queryString=require("query-string");var _runTransitionHook=require("./runTransitionHook");var _runTransitionHook2=_interopRequireDefault(_runTransitionHook);var _parsePath=require("./parsePath");var _parsePath2=_interopRequireDefault(_parsePath);var _deprecate=require("./deprecate");var _deprecate2=_interopRequireDefault(_deprecate);var SEARCH_BASE_KEY="$searchBase";function defaultStringifyQuery(query){return _queryString.stringify(query).replace(/%20/g,"+")}var defaultParseQueryString=_queryString.parse;function isNestedObject(object){for(var p in object){if(object.hasOwnProperty(p)&&typeof object[p]==="object"&&!Array.isArray(object[p])&&object[p]!==null)return true}return false}function useQueries(createHistory){return function(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var stringifyQuery=options.stringifyQuery;var parseQueryString=options.parseQueryString;var historyOptions=_objectWithoutProperties(options,["stringifyQuery","parseQueryString"]);var history=createHistory(historyOptions);if(typeof stringifyQuery!=="function")stringifyQuery=defaultStringifyQuery;if(typeof parseQueryString!=="function")parseQueryString=defaultParseQueryString;function addQuery(location){if(location.query==null){var search=location.search;location.query=parseQueryString(search.substring(1));location[SEARCH_BASE_KEY]={search:search,searchBase:""}}return location}function appendQuery(location,query){var _extends2;var queryString=undefined;if(!query||(queryString=stringifyQuery(query))==="")return location;process.env.NODE_ENV!=="production"?_warning2["default"](stringifyQuery!==defaultStringifyQuery||!isNestedObject(query),"useQueries does not stringify nested query objects by default; "+"use a custom stringifyQuery function"):undefined;if(typeof location==="string")location=_parsePath2["default"](location);var searchBaseSpec=location[SEARCH_BASE_KEY];var searchBase=undefined;if(searchBaseSpec&&location.search===searchBaseSpec.search){searchBase=searchBaseSpec.searchBase}else{searchBase=location.search||""}var search=searchBase+(searchBase?"&":"?")+queryString;return _extends({},location,(_extends2={search:search},_extends2[SEARCH_BASE_KEY]={search:search,searchBase:searchBase},_extends2))}function listenBefore(hook){return history.listenBefore(function(location,callback){_runTransitionHook2["default"](hook,addQuery(location),callback)})}function listen(listener){return history.listen(function(location){listener(addQuery(location))})}function push(location){history.push(appendQuery(location,location.query))}function replace(location){history.replace(appendQuery(location,location.query))}function createPath(location,query){return history.createPath(appendQuery(location,query||location.query))}function createHref(location,query){return history.createHref(appendQuery(location,query||location.query))}function createLocation(){return addQuery(history.createLocation.apply(history,arguments))}function pushState(state,path,query){if(typeof path==="string")path=_parsePath2["default"](path);push(_extends({state:state},path,{query:query}))}function replaceState(state,path,query){if(typeof path==="string")path=_parsePath2["default"](path);replace(_extends({state:state},path,{query:query}))}return _extends({},history,{listenBefore:listenBefore,listen:listen,push:push,replace:replace,createPath:createPath,createHref:createHref,createLocation:createLocation,pushState:_deprecate2["default"](pushState,"pushState is deprecated; use push instead"),replaceState:_deprecate2["default"](replaceState,"replaceState is deprecated; use replace instead")})}}exports["default"]=useQueries;module.exports=exports["default"]}).call(this,require("_process"))},{"./deprecate":103,"./parsePath":108,"./runTransitionHook":109,_process:87,"query-string":120,warning:117}],113:[function(require,module,exports){var pSlice=Array.prototype.slice;var objectKeys=require("./lib/keys.js");var isArguments=require("./lib/is_arguments.js");var deepEqual=module.exports=function(actual,expected,opts){if(!opts)opts={};if(actual===expected){return true}else if(actual instanceof Date&&expected instanceof Date){return actual.getTime()===expected.getTime()}else if(!actual||!expected||typeof actual!="object"&&typeof expected!="object"){return opts.strict?actual===expected:actual==expected}else{return objEquiv(actual,expected,opts)}};function isUndefinedOrNull(value){return value===null||value===undefined}function isBuffer(x){if(!x||typeof x!=="object"||typeof x.length!=="number")return false;if(typeof x.copy!=="function"||typeof x.slice!=="function"){return false}if(x.length>0&&typeof x[0]!=="number")return false;return true}function objEquiv(a,b,opts){var i,key;
if(isUndefinedOrNull(a)||isUndefinedOrNull(b))return false;if(a.prototype!==b.prototype)return false;if(isArguments(a)){if(!isArguments(b)){return false}a=pSlice.call(a);b=pSlice.call(b);return deepEqual(a,b,opts)}if(isBuffer(a)){if(!isBuffer(b)){return false}if(a.length!==b.length)return false;for(i=0;i<a.length;i++){if(a[i]!==b[i])return false}return true}try{var ka=objectKeys(a),kb=objectKeys(b)}catch(e){return false}if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!deepEqual(a[key],b[key],opts))return false}return typeof a===typeof b}},{"./lib/is_arguments.js":114,"./lib/keys.js":115}],114:[function(require,module,exports){var supportsArgumentsClass=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";exports=module.exports=supportsArgumentsClass?supported:unsupported;exports.supported=supported;function supported(object){return Object.prototype.toString.call(object)=="[object Arguments]"}exports.unsupported=unsupported;function unsupported(object){return object&&typeof object=="object"&&typeof object.length=="number"&&Object.prototype.hasOwnProperty.call(object,"callee")&&!Object.prototype.propertyIsEnumerable.call(object,"callee")||false}},{}],115:[function(require,module,exports){exports=module.exports=typeof Object.keys==="function"?Object.keys:shim;exports.shim=shim;function shim(obj){var keys=[];for(var key in obj)keys.push(key);return keys}},{}],116:[function(require,module,exports){(function(process){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(process.env.NODE_ENV!=="production"){if(format===undefined){throw new Error("invariant requires an error message argument")}}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}};module.exports=invariant}).call(this,require("_process"))},{_process:87}],117:[function(require,module,exports){(function(process){"use strict";var warning=function(){};if(process.env.NODE_ENV!=="production"){warning=function(condition,format,args){var len=arguments.length;args=new Array(len>2?len-2:0);for(var key=2;key<len;key++){args[key-2]=arguments[key]}if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.length<10||/^[s\W]*$/.test(format)){throw new Error("The warning format should be able to uniquely identify this "+"warning. Please, use a more descriptive format than: "+format)}if(!condition){var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}}}}module.exports=warning}).call(this,require("_process"))},{_process:87}],118:[function(require,module,exports){var isarray=require("isarray");module.exports=pathToRegexp;module.exports.parse=parse;module.exports.compile=compile;module.exports.tokensToFunction=tokensToFunction;module.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(str){var tokens=[];var key=0;var index=0;var path="";var res;while((res=PATH_REGEXP.exec(str))!=null){var m=res[0];var escaped=res[1];var offset=res.index;path+=str.slice(index,offset);index=offset+m.length;if(escaped){path+=escaped[1];continue}if(path){tokens.push(path);path=""}var prefix=res[2];var name=res[3];var capture=res[4];var group=res[5];var suffix=res[6];var asterisk=res[7];var repeat=suffix==="+"||suffix==="*";var optional=suffix==="?"||suffix==="*";var delimiter=prefix||"/";var pattern=capture||group||(asterisk?".*":"[^"+delimiter+"]+?");tokens.push({name:name||key++,prefix:prefix||"",delimiter:delimiter,optional:optional,repeat:repeat,pattern:escapeGroup(pattern)})}if(index<str.length){path+=str.substr(index)}if(path){tokens.push(path)}return tokens}function compile(str){return tokensToFunction(parse(str))}function tokensToFunction(tokens){var matches=new Array(tokens.length);for(var i=0;i<tokens.length;i++){if(typeof tokens[i]==="object"){matches[i]=new RegExp("^"+tokens[i].pattern+"$")}}return function(obj){var path="";var data=obj||{};for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==="string"){path+=token;continue}var value=data[token.name];var segment;if(value==null){if(token.optional){continue}else{throw new TypeError('Expected "'+token.name+'" to be defined')}}if(isarray(value)){if(!token.repeat){throw new TypeError('Expected "'+token.name+'" to not repeat, but received "'+value+'"')}if(value.length===0){if(token.optional){continue}else{throw new TypeError('Expected "'+token.name+'" to not be empty')}}for(var j=0;j<value.length;j++){segment=encodeURIComponent(value[j]);if(!matches[i].test(segment)){throw new TypeError('Expected all "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"')}path+=(j===0?token.prefix:token.delimiter)+segment}continue}segment=encodeURIComponent(value);if(!matches[i].test(segment)){throw new TypeError('Expected "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"')}path+=token.prefix+segment}return path}}function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(group){return group.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(re,keys){re.keys=keys;return re}function flags(options){return options.sensitive?"":"i"}function regexpToRegexp(path,keys){var groups=path.source.match(/\((?!\?)/g);if(groups){for(var i=0;i<groups.length;i++){keys.push({name:i,prefix:null,delimiter:null,optional:false,repeat:false,pattern:null})}}return attachKeys(path,keys)}function arrayToRegexp(path,keys,options){var parts=[];for(var i=0;i<path.length;i++){parts.push(pathToRegexp(path[i],keys,options).source)}var regexp=new RegExp("(?:"+parts.join("|")+")",flags(options));return attachKeys(regexp,keys)}function stringToRegexp(path,keys,options){var tokens=parse(path);var re=tokensToRegExp(tokens,options);for(var i=0;i<tokens.length;i++){if(typeof tokens[i]!=="string"){keys.push(tokens[i])}}return attachKeys(re,keys)}function tokensToRegExp(tokens,options){options=options||{};var strict=options.strict;var end=options.end!==false;var route="";var lastToken=tokens[tokens.length-1];var endsWithSlash=typeof lastToken==="string"&&/\/$/.test(lastToken);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==="string"){route+=escapeString(token)}else{var prefix=escapeString(token.prefix);var capture=token.pattern;if(token.repeat){capture+="(?:"+prefix+capture+")*"}if(token.optional){if(prefix){capture="(?:"+prefix+"("+capture+"))?"}else{capture="("+capture+")?"}}else{capture=prefix+"("+capture+")"}route+=capture}}if(!strict){route=(endsWithSlash?route.slice(0,-2):route)+"(?:\\/(?=$))?"}if(end){route+="$"}else{route+=strict&&endsWithSlash?"":"(?=\\/|$)"}return new RegExp("^"+route,flags(options))}function pathToRegexp(path,keys,options){keys=keys||[];if(!isarray(keys)){options=keys;keys=[]}else if(!options){options={}}if(path instanceof RegExp){return regexpToRegexp(path,keys,options)}if(isarray(path)){return arrayToRegexp(path,keys,options)}return stringToRegexp(path,keys,options)}},{isarray:119}],119:[function(require,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],120:[function(require,module,exports){"use strict";var strictUriEncode=require("strict-uri-encode");exports.extract=function(str){return str.split("?")[1]||""};exports.parse=function(str){if(typeof str!=="string"){return{}}str=str.trim().replace(/^(\?|#|&)/,"");if(!str){return{}}return str.split("&").reduce(function(ret,param){var parts=param.replace(/\+/g," ").split("=");var key=parts.shift();var val=parts.length>0?parts.join("="):undefined;key=decodeURIComponent(key);val=val===undefined?null:decodeURIComponent(val);if(!ret.hasOwnProperty(key)){ret[key]=val}else if(Array.isArray(ret[key])){ret[key].push(val)}else{ret[key]=[ret[key],val]}return ret},{})};exports.stringify=function(obj){return obj?Object.keys(obj).sort().map(function(key){var val=obj[key];if(val===undefined){return""}if(val===null){return key}if(Array.isArray(val)){return val.sort().map(function(val2){return strictUriEncode(key)+"="+strictUriEncode(val2)}).join("&")}return strictUriEncode(key)+"="+strictUriEncode(val)}).filter(function(x){return x.length>0}).join("&"):""}},{"strict-uri-encode":121}],121:[function(require,module,exports){"use strict";module.exports=function(str){return encodeURIComponent(str).replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16)})}},{}],122:[function(require,module,exports){"use strict";var _keys=require("babel-runtime/core-js/object/keys");var _keys2=_interopRequireDefault(_keys);var _assign=require("babel-runtime/core-js/object/assign");var _assign2=_interopRequireDefault(_assign);var _vue=require("vue");var _vue2=_interopRequireDefault(_vue);var _debug=require("debug");var _debug2=_interopRequireDefault(_debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var debug=(0,_debug2.default)("voie:directive");_vue2.default.elementDirective("v-view",{bind:function bind(){var _vm$$options=this.vm.$options;var state=_vm$$options.state;var manager=_vm$$options.manager;manager.mountPoints[state.name]={hostVm:this.vm,viewEl:this.el,viewElChildren:[].slice.call(this.el.children)};debug("registered v-view",this.el)},unbind:function unbind(){var _vm$$options2=this.vm.$options;var state=_vm$$options2.state;var manager=_vm$$options2.manager;delete manager.mountPoints[state.name];debug("unregistered v-view",this.el)}});_vue2.default.directive("link",{bind:function bind(){this.manager=resolveManager(this.vm);if(!this.manager){throw new Error("Can't locate state manager.")}this.manager.on("context_updated",this.updateElement,this)},unbind:function unbind(){this.manager.off("context_updated",this.updateElement,this)},update:function update(value){var _this=this;if(!value){throw new Error('v-link: expression "'+this.expression+'" should resolve to { name: ..., params... }}')}var manager=this.manager;var name=null;if(typeof value=="string"){name=value;this.params={}}else{name=value.name;this.params=value.params||{}}this.state=manager.get(name);if(!this.state){console.warn('State "'+name+'" not found.');return}this.el.onclick=function(ev){ev.preventDefault();manager.go({name:name,params:_this.params})};this.updateElement()},updateElement:function updateElement(){var manager=this.manager;var ctx=manager.context;var state=this.state;if(!state){return}var params=(0,_assign2.default)({},ctx.params,this.params);this.el.setAttribute("href",state.createHref(params));this.el.classList.remove(manager.activeClass);if(ctx.state){var paramsMatch=(0,_keys2.default)(params).every(function(key){return ctx.params[key]===params[key]});var active=ctx.state.includes(state)&&paramsMatch;if(active){this.el.classList.add(manager.activeClass)}else{this.el.classList.remove(manager.activeClass)}}}});function resolveManager(vm){var manager=vm.$options.manager;if(manager){return manager}if(vm.$parent){return resolveManager(vm.$parent)}return null}},{"babel-runtime/core-js/object/assign":1,"babel-runtime/core-js/object/keys":5,debug:88,vue:"vue"}],123:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RedirectLoopError=exports.StateNotFoundError=undefined;var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of");var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var StateNotFoundError=exports.StateNotFoundError=function(_Error){(0,_inherits3.default)(StateNotFoundError,_Error);function StateNotFoundError(name){(0,_classCallCheck3.default)(this,StateNotFoundError);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(StateNotFoundError).call(this,'State "'+name+'" not found.'));_this.name=name;return _this}return StateNotFoundError}(Error);var RedirectLoopError=exports.RedirectLoopError=function(_Error2){(0,_inherits3.default)(RedirectLoopError,_Error2);function RedirectLoopError(transition){(0,_classCallCheck3.default)(this,RedirectLoopError);var _this2=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(RedirectLoopError).call(this,"Redirect loop detected "+"(set maxRedirects on state manager to configure max redirects per transition)"));_this2.transition=transition;return _this2}return RedirectLoopError}(Error)},{"babel-runtime/core-js/object/get-prototype-of":4,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/inherits":11,"babel-runtime/helpers/possibleConstructorReturn":12}],124:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Transition=exports.State=exports.StateManager=undefined;var _stateManager=require("./state-manager");var _stateManager2=_interopRequireDefault(_stateManager);var _state=require("./state");var _state2=_interopRequireDefault(_state);var _transition=require("./transition");var _transition2=_interopRequireDefault(_transition);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.StateManager=_stateManager2.default;exports.State=_state2.default;exports.Transition=_transition2.default},{"./state":126,"./state-manager":125,"./transition":127}],125:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _keys=require("babel-runtime/core-js/object/keys");var _keys2=_interopRequireDefault(_keys);var _assign=require("babel-runtime/core-js/object/assign");var _assign2=_interopRequireDefault(_assign);var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);var _promise=require("babel-runtime/core-js/promise");var _promise2=_interopRequireDefault(_promise);var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of");var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _debug=require("debug");var _debug2=_interopRequireDefault(_debug);var _eventemitter=require("eventemitter3");var _eventemitter2=_interopRequireDefault(_eventemitter);var _state=require("./state");var _state2=_interopRequireDefault(_state);var _transition=require("./transition");var _transition2=_interopRequireDefault(_transition);var _history=require("history");require("./directives");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var debug=(0,_debug2.default)("voie:manager");var StateManager=function(_EventEmitter){(0,_inherits3.default)(StateManager,_EventEmitter);function StateManager(spec){(0,_classCallCheck3.default)(this,StateManager);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(StateManager).call(this));_this._setupEl(spec);_this._setupHistory(spec);_this._setupOptions(spec);_this._setupHooks(spec);_this._setupState();return _this}(0,_createClass3.default)(StateManager,[{key:"_setupEl",value:function _setupEl(spec){this.el=spec.el instanceof HTMLElement?spec.el:document.querySelector(spec.el);if(!this.el){throw new Error("Please specify `el` as an entry-point node of your app.")}}},{key:"_setupHistory",value:function _setupHistory(spec){if(spec.history){this.history=spec.history}else{this._setupDefaultHtml5History(spec)}}},{key:"_setupDefaultHtml5History",value:function _setupDefaultHtml5History(spec){var base=spec.base;if(!base){var baseEl=document.querySelector("base");base=baseEl&&baseEl.getAttribute("href")}base=(base||"").replace(/\/+$/,"");this.history=(0,_history.useBasename)(_history.createHistory)({basename:base})}},{key:"_setupOptions",value:function _setupOptions(spec){if(spec.handleUncaught){this.handleUncaught=spec.handleUncaught}this.maxRedirects=Number(spec.maxRedirects)||10;this.activeClass=spec.activeClass||"active"}},{key:"_setupHooks",value:function _setupHooks(spec){if(spec.beforeEach){this.beforeEach=spec.beforeEach}if(spec.afterEach){this.afterEach=spec.afterEach}}},{key:"_setupState",value:function _setupState(){this.states={};this.context={parent:null,state:null,vm:null,params:{},data:{}};this.mountPoints={"":{viewEl:this.el,viewElChildren:[].slice.call(this.el.children)}};this.transition=null}},{key:"beforeEach",value:function beforeEach(){}},{key:"afterEach",value:function afterEach(){}},{key:"handleUncaught",value:function handleUncaught(err){return _promise2.default.reject(err)}},{key:"add",value:function add(name,spec){if((typeof name==="undefined"?"undefined":(0,_typeof3.default)(name))=="object"){spec=name;name=spec.name}if(!name){throw new Error("State `name` is mandatory.")}if(this.states[name]){throw new Error('State "'+name+'" already added')}spec.name=name;var state=new _state2.default(this,spec);debug("add %s",name);this.states[name]=state;return state}},{key:"get",value:function get(name){return this.states[name]}},{key:"go",value:function go(options){var _this2=this;if(this.transition){throw new Error("Transition is in progress.")}this.transition=new _transition2.default(this);var currentState=this.context.state;var name=null;if(typeof options==="string"){name=options;options={}}else if(options.name){name=options.name}else if(currentState){name=currentState.name}else{throw new Error("Destination state not specified")}return _promise2.default.resolve().then(function(){return _this2.transition.go(name,options.params||{})}).then(function(result){_this2.transition=null;_this2.emit("transition_finished");return result}).catch(function(err){_this2.transition=null;_this2.emit("transition_finished",err);return _this2.handleUncaught(err)}).then(function(){return _this2._updateHistory(options.replace||false)})}},{key:"update",value:function update(params,replace){var _this3=this;(0,_assign2.default)(this.context.params,params);this.emit("context_updated",this.context);return _promise2.default.resolve().then(function(){return _this3._updateHistory(replace)})}},{key:"_getMountPoint",value:function _getMountPoint(){var ctx=this.context;var el=null;while(ctx&&!el){var state=ctx.state;if(state){el=this.mountPoints[state.name]}else{el=this.mountPoints[""]}ctx=ctx.parent}return el}},{key:"start",value:function start(){var _this4=this;if(this._unlisten){return _promise2.default.resolve()}this._unlisten=this.history.listen(function(location){return _this4._matchLocation(location)});return new _promise2.default(function(resolve){return _this4.once("history_updated",resolve)})}},{key:"stop",value:function stop(){if(!this._unlisten){return}this._unlisten();delete this._unlisten}},{key:"_matchLocation",value:function _matchLocation(location){var _this5=this;var url=location.pathname+location.search;if(url===this.context.url){return}var found=(0,_keys2.default)(this.states).find(function(name){var state=_this5.states[name];var matched=state._match(location);if(matched){debug("match url %s -> %s",location.pathname,name);_this5.go({name:name,params:matched,replace:true});return true}});if(!found){console.warn("No states match URL: "+location.pathname);this._updateHistory(true)}}},{key:"_updateHistory",value:function _updateHistory(replace){var state=this.context.state;var url=state?state._makeUrl(this.context.params):"/";if(url===this.context.url){return}this.context.url=url;if(replace){this.history.replace(url)}else{this.history.push(url)}this.emit("history_updated",{url:url,ctx:this.context})}}]);return StateManager}(_eventemitter2.default);exports.default=StateManager},{"./directives":122,"./state":126,"./transition":127,"babel-runtime/core-js/object/assign":1,"babel-runtime/core-js/object/get-prototype-of":4,"babel-runtime/core-js/object/keys":5,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":11,"babel-runtime/helpers/possibleConstructorReturn":12,"babel-runtime/helpers/typeof":13,debug:88,eventemitter3:91,history:107}],126:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _keys=require("babel-runtime/core-js/object/keys");var _keys2=_interopRequireDefault(_keys);var _promise=require("babel-runtime/core-js/promise");var _promise2=_interopRequireDefault(_promise);var _assign=require("babel-runtime/core-js/object/assign");var _assign2=_interopRequireDefault(_assign);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _pathToRegexp=require("path-to-regexp");var _pathToRegexp2=_interopRequireDefault(_pathToRegexp);var _queryString=require("query-string");var _queryString2=_interopRequireDefault(_queryString);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var State=function(){function State(manager,spec){(0,_classCallCheck3.default)(this,State);this.manager=manager;this._setupName(spec);this._setupHierarchy(spec);this._setupComponent(spec);this._setupHooks(spec);this._setupPath(spec);this._setupParams(spec);this._setupOptions(spec)}(0,_createClass3.default)(State,[{key:"_setupName",value:function _setupName(spec){this.name=spec.name;if(!this.name){throw new Error("State `name` is required")}}},{key:"_setupHierarchy",value:function _setupHierarchy(spec){this.parentState=this.manager.get(spec.parent||this.name.split(".").slice(0,-1).join("."))||null;this.lineage=this.parentState?this.parentState.lineage.concat([this]):[this]}},{key:"_setupComponent",value:function _setupComponent(spec){if(spec.component){this.component=spec.component;if(!this.component.name){this.component.name=this.name.replace(/\./g,"-")}}}},{key:"_setupHooks",value:function _setupHooks(spec){if(spec.enter){this.enter=spec.enter}if(spec.leave){this.leave=spec.leave}if(spec.handleError){this.handleError=spec.handleError}}},{key:"_setupPath",value:function _setupPath(spec){if(!spec.path&&spec.url){console.warn("state.url is deprecated; use state.path instead");spec.path=spec.url}this.path=spec.path||"";if(this.path.indexOf("/")===0){this.fullPath=this.path}else{var parentPath=this.parentState?this.parentState.fullPath:"/";this.fullPath=parentPath.replace(/\/+$/,"")+(this.path?"/"+this.path:"")}if(!this.fullPath){this.fullPath="/"}this._pathParams=[];this._pathRegex=(0,_pathToRegexp2.default)(this.fullPath,this._pathParams);this._pathFormat=_pathToRegexp2.default.compile(this.fullPath)}},{key:"_setupParams",value:function _setupParams(spec){var _this=this;this._paramsSpec={};this._pathParams.forEach(function(param){_this._paramsSpec[param.name]=null});(0,_assign2.default)(this._paramsSpec,spec.params)}},{key:"_setupOptions",value:function _setupOptions(spec){if(spec.redirect){this.redirect=spec.redirect}}},{key:"enter",value:function enter(ctx){return _promise2.default.resolve()}},{key:"leave",value:function leave(ctx){return _promise2.default.resolve()}},{key:"handleError",value:function handleError(err,ctx){return _promise2.default.reject(err)}},{key:"includes",value:function includes(stateOrName){var state=stateOrName instanceof State?stateOrName:this.manager.get(stateOrName);return this.lineage.indexOf(state)>-1}},{key:"_match",value:function _match(location){var matched=this._pathRegex.exec(location.pathname);if(!matched){return null}var params=this._pathParams.reduce(function(params,p,i){params[p.name]=matched[i+1];return params},{});try{var query=_queryString2.default.parse(location.search);(0,_assign2.default)(params,query)}catch(e){}return params}},{key:"_makeParams",value:function _makeParams(params){var _this2=this;return(0,_keys2.default)(this._paramsSpec).reduce(function(result,name){result[name]=name in params?params[name]:_this2._paramsSpec[name];return result},{})}},{key:"_makeSearch",value:function _makeSearch(params){var query=(0,_keys2.default)(params).reduce(function(query,key){var value=params[key];if(value!=null){query[key]=value}return query},{});this._pathParams.forEach(function(p){delete query[p.name]});try{var search=_queryString2.default.stringify(query);if(search){return"?"+search}}catch(e){}return""}},{key:"_makeUrl",value:function _makeUrl(params){return this._pathFormat(params)+this._makeSearch(params)}},{key:"createHref",value:function createHref(params){return this.manager.history.createHref(this._makeUrl(params))}}]);return State}();exports.default=State},{"babel-runtime/core-js/object/assign":1,"babel-runtime/core-js/object/keys":5,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"path-to-regexp":118,"query-string":120}],127:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _keys=require("babel-runtime/core-js/object/keys");var _keys2=_interopRequireDefault(_keys);var _promise=require("babel-runtime/core-js/promise");var _promise2=_interopRequireDefault(_promise);var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);var _assign=require("babel-runtime/core-js/object/assign");var _assign2=_interopRequireDefault(_assign);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _debug=require("debug");var _debug2=_interopRequireDefault(_debug);var _error=require("./error");var _utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var debug=(0,_debug2.default)("voie:transition");var Transition=function(){function Transition(manager){(0,_classCallCheck3.default)(this,Transition);this.manager=manager;this.redirectsCount=0;this.params=(0,_assign2.default)({},manager.context.params)}(0,_createClass3.default)(Transition,[{key:"go",value:function go(name,params,isRedirect){var _this=this;debug(isRedirect?"redirect to %s":"go to %s",name);(0,_assign2.default)(this.params,params||{});var state=this.manager.get(name);if(!state){throw new _error.StateNotFoundError(name)}this.dstState=state;if(state.redirect){return this.handleRedirect(state.redirect)}return this.goUpstream().then(function(){return _this.goDownstream()})}},{key:"handleRedirect",value:function handleRedirect(redirect){var _this2=this;this.redirectsCount++;if(this.redirectsCount>this.manager.maxRedirects){throw new _error.RedirectLoopError(this)}switch(typeof redirect==="undefined"?"undefined":(0,_typeof3.default)(redirect)){case"string":return this.go(redirect,{},true);case"object":return this.go(redirect.name,redirect.params,true);case"function":return _promise2.default.resolve().then(function(){return redirect(_this2)}).then(function(redirect){return _this2.handleRedirect(redirect)});default:throw new Error("Unknown redirect: "+redirect)}}},{key:"goUpstream",value:function goUpstream(){var _this3=this;var ctx=this.manager.context;if(!ctx.state){return _promise2.default.resolve()}var state=ctx.state;if(this.dstState.includes(state)){var paramsMatch=(0,_keys2.default)(ctx.params).every(function(key){return ctx.params[key]===_this3.params[key]});if(paramsMatch){return _promise2.default.resolve()}}return _promise2.default.resolve().then(function(){return state.leave(ctx)}).then(function(){return _this3.manager.afterEach(ctx)}).then(function(){debug(" <- left %s",state.name);_this3.cleanup(ctx)}).then(function(){return _this3.goUpstream()})}},{key:"cleanup",value:function cleanup(ctx){if(ctx.vm){var el=ctx.vm.$el;var mp=ctx.mountPoint;ctx.vm.$destroy();if(mp){(function(){var viewEl=ctx.mountPoint.viewEl;el.parentNode.replaceChild(viewEl,el);mp.viewElChildren.forEach(function(el){return viewEl.appendChild(el)})})()}}this.manager.context=ctx.parent;this.manager.emit("context_updated",this.manager.context)}},{key:"goDownstream",value:function goDownstream(){var _this4=this;var prevCtx=this.manager.context;var dstLineage=this.dstState.lineage;var nextState=dstLineage[dstLineage.indexOf(prevCtx.state)+1];if(!nextState){return _promise2.default.resolve()}var nextContext={parent:prevCtx,state:nextState,params:(0,_assign2.default)({},prevCtx.params,nextState._makeParams(this.params)),data:(0,_assign2.default)({},prevCtx.data)};return _promise2.default.resolve(true).then(function(){return _this4.manager.beforeEach(nextContext)}).catch(function(err){return nextState.handleError(err,nextContext)}).then(function(obj){return _this4._handleEnterHook(obj,nextContext)}).then(function(proceed){if(!proceed){return false}return _promise2.default.resolve().then(function(){return nextState.enter(nextContext)}).catch(function(err){return nextState.handleError(err,nextContext)}).then(function(obj){return _this4._handleEnterHook(obj,nextContext)})}).then(function(proceed){if(!proceed){return false}_this4.manager.context=nextContext;_this4.manager.emit("context_updated",_this4.manager.context);_this4.render(nextContext,nextState.component);if(nextState!==_this4.dstState){return _this4.goDownstream()}})}},{key:"_handleEnterHook",value:function _handleEnterHook(obj,nextContext){obj=obj||{};var nextState=nextContext.state;debug(" -> entered %s",nextState.name);if(obj.redirect){return this.handleRedirect(obj.redirect).then(function(){return false})}var rendered=this.render(nextContext,obj.component);return!rendered}},{key:"render",value:function render(ctx,comp){if(!comp){return false}var Comp=(0,_utils.toVueComponent)(comp);var mp=this.manager._getMountPoint();ctx.mountPoint=mp;ctx.vm=new Comp({data:ctx.data,el:mp.viewEl,parent:mp.hostVm,params:ctx.params,ctx:ctx,state:ctx.state,manager:this.manager});return true}},{key:"to",get:function get(){return this.dstState}}]);return Transition}();exports.default=Transition},{"./error":123,"./utils":128,"babel-runtime/core-js/object/assign":1,"babel-runtime/core-js/object/keys":5,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/typeof":13,debug:88}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toVueComponent=toVueComponent;var _vue=require("vue");var _vue2=_interopRequireDefault(_vue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function toVueComponent(obj){if(obj.name==="VueComponent"){return obj}return _vue2.default.extend(obj)}},{vue:"vue"}]},{},[124])(124);
});